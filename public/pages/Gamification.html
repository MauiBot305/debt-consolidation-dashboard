<!-- Gamification Dashboard -->
<div class="space-y-6">
  <!-- Header with Points Counter -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold text-white font-orbitron mb-2">Agent Gamification</h1>
      <p class="text-gray-400">Compete, achieve, earn rewards</p>
    </div>
    <div class="glass-card rounded-2xl p-6 text-center">
      <p class="text-gray-400 text-sm mb-1">Your Points</p>
      <h2 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400 font-orbitron" id="total-points">0</h2>
    </div>
  </div>

  <!-- Rankings Tabs -->
  <div class="glass-card rounded-2xl p-6 fade-in-up stagger-1">
    <div class="flex items-center gap-4 mb-6 border-b border-gray-800">
      <button onclick="switchRanking('daily')" class="ranking-tab active" data-tab="daily">
        <span>Daily</span>
        <div class="tab-indicator"></div>
      </button>
      <button onclick="switchRanking('weekly')" class="ranking-tab" data-tab="weekly">
        <span>Weekly</span>
        <div class="tab-indicator"></div>
      </button>
      <button onclick="switchRanking('monthly')" class="ranking-tab" data-tab="monthly">
        <span>Monthly</span>
        <div class="tab-indicator"></div>
      </button>
      <button onclick="switchRanking('alltime')" class="ranking-tab" data-tab="alltime">
        <span>All-Time</span>
        <div class="tab-indicator"></div>
      </button>
    </div>

    <!-- Podium -->
    <div class="grid grid-cols-3 gap-4 mb-8 max-w-3xl mx-auto" id="podium">
      <!-- 2nd Place (Left) -->
      <div class="flex flex-col items-center justify-end">
        <div class="podium-ring silver mb-3">
          <img src="https://ui-avatars.com/api/?name=Maria+Garcia&background=C0C0C0&color=000" class="w-20 h-20 rounded-full" />
        </div>
        <h3 class="text-white font-semibold mb-1">Maria G.</h3>
        <p class="text-sm text-gray-400 mb-2">12 enrollments</p>
        <div class="w-full bg-gradient-to-t from-gray-400/30 to-gray-400/10 rounded-t-xl pt-6 pb-4 text-center border-t-2 border-gray-400">
          <div class="text-3xl font-bold text-gray-300 font-orbitron mb-1">2</div>
          <div class="text-sm text-gray-400">8,420 pts</div>
        </div>
      </div>

      <!-- 1st Place (Center - Elevated) -->
      <div class="flex flex-col items-center justify-end -mt-8">
        <div class="relative mb-3">
          <i data-lucide="crown" class="w-8 h-8 text-yellow-400 absolute -top-8 left-1/2 -translate-x-1/2"></i>
          <div class="podium-ring gold">
            <img src="https://ui-avatars.com/api/?name=John+Smith&background=FFD700&color=000" class="w-24 h-24 rounded-full" />
          </div>
        </div>
        <h3 class="text-white font-semibold mb-1">John S.</h3>
        <p class="text-sm text-gray-400 mb-2">15 enrollments</p>
        <div class="w-full bg-gradient-to-t from-yellow-500/30 to-yellow-500/10 rounded-t-xl pt-8 pb-4 text-center border-t-2 border-yellow-400">
          <div class="text-4xl font-bold text-yellow-400 font-orbitron mb-1">1</div>
          <div class="text-sm text-gray-400">12,850 pts</div>
        </div>
      </div>

      <!-- 3rd Place (Right) -->
      <div class="flex flex-col items-center justify-end">
        <div class="podium-ring bronze mb-3">
          <img src="https://ui-avatars.com/api/?name=Agent+3&background=CD7F32&color=fff" class="w-20 h-20 rounded-full" />
        </div>
        <h3 class="text-white font-semibold mb-1">Agent 3</h3>
        <p class="text-sm text-gray-400 mb-2">10 enrollments</p>
        <div class="w-full bg-gradient-to-t from-orange-600/30 to-orange-600/10 rounded-t-xl pt-6 pb-4 text-center border-t-2 border-orange-600">
          <div class="text-3xl font-bold text-orange-400 font-orbitron mb-1">3</div>
          <div class="text-sm text-gray-400">6,720 pts</div>
        </div>
      </div>
    </div>

    <!-- Full Leaderboard Table -->
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="text-gray-400 text-xs uppercase border-b border-gray-800">
            <th class="text-left pb-3">Rank</th>
            <th class="text-left pb-3">Agent</th>
            <th class="text-right pb-3">Enrolled</th>
            <th class="text-right pb-3">Revenue</th>
            <th class="text-right pb-3">Calls</th>
            <th class="text-right pb-3">Points</th>
          </tr>
        </thead>
        <tbody id="leaderboard-table" class="divide-y divide-gray-800">
          <!-- Dynamically populated -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Achievement Badges -->
  <div class="glass-card rounded-2xl p-6 fade-in-up stagger-2">
    <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
      <i data-lucide="award" class="w-5 h-5 text-yellow-400"></i>
      Achievement Badges
    </h2>
    <div class="grid grid-cols-4 sm:grid-cols-5 lg:grid-cols-10 gap-4" id="badges-grid">
      <!-- Dynamically populated -->
    </div>
  </div>

  <!-- Active Challenges & Bounty Board -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Active Challenges -->
    <div class="glass-card rounded-2xl p-6 fade-in-up stagger-3">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
        <i data-lucide="target" class="w-5 h-5 text-cyan-400"></i>
        Active Challenges
      </h2>
      <div class="space-y-4" id="challenges-list">
        <!-- Dynamically populated -->
      </div>
    </div>

    <!-- Bounty Board -->
    <div class="glass-card rounded-2xl p-6 fade-in-up stagger-4">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
        <i data-lucide="crosshair" class="w-5 h-5 text-orange-400"></i>
        Bounty Board
      </h2>
      <div class="space-y-4" id="bounty-list">
        <!-- Dynamically populated -->
      </div>
    </div>
  </div>

  <!-- Live Kill Feed & Reward Store -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Live Kill Feed -->
    <div class="glass-card rounded-2xl p-6 fade-in-up stagger-5">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
        <i data-lucide="zap" class="w-5 h-5 text-green-400"></i>
        Live Kill Feed
      </h2>
      <div class="space-y-3 max-h-96 overflow-y-auto" id="kill-feed">
        <!-- Dynamically populated with slide-in animation -->
      </div>
    </div>

    <!-- Reward Store -->
    <div class="glass-card rounded-2xl p-6 fade-in-up stagger-6">
      <h2 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
        <i data-lucide="gift" class="w-5 h-5 text-pink-400"></i>
        Reward Store
      </h2>
      <div class="grid grid-cols-2 gap-4" id="reward-store">
        <!-- Dynamically populated -->
      </div>
    </div>
  </div>
</div>

<style>
  /* Ranking Tabs */
  .ranking-tab {
    position: relative;
    padding: 12px 0;
    color: #94a3b8;
    font-weight: 600;
    transition: color 0.2s;
    cursor: pointer;
    background: none;
    border: none;
  }

  .ranking-tab:hover {
    color: #fff;
  }

  .ranking-tab.active {
    color: #fff;
  }

  .tab-indicator {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, #3B82F6, #06B6D4);
    transform: scaleX(0);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .ranking-tab.active .tab-indicator {
    transform: scaleX(1);
  }

  /* Podium Rings */
  .podium-ring {
    padding: 4px;
    border-radius: 50%;
    box-shadow: 0 0 24px currentColor;
    animation: ring-glow 2s ease-in-out infinite;
  }

  .podium-ring.gold {
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: #FFD700;
  }

  .podium-ring.silver {
    background: linear-gradient(135deg, #C0C0C0, #A8A8A8);
    color: #C0C0C0;
  }

  .podium-ring.bronze {
    background: linear-gradient(135deg, #CD7F32, #B87333);
    color: #CD7F32;
  }

  @keyframes ring-glow {
    0%, 100% {
      box-shadow: 0 0 16px currentColor;
    }
    50% {
      box-shadow: 0 0 32px currentColor, 0 0 48px currentColor;
    }
  }

  /* Badge Styles */
  .badge {
    position: relative;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    cursor: pointer;
  }

  .badge.unlocked {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(6, 182, 212, 0.3));
    border: 2px solid rgba(59, 130, 246, 0.5);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
  }

  .badge.locked {
    background: rgba(30, 41, 59, 0.5);
    border: 2px solid rgba(75, 85, 99, 0.3);
    filter: grayscale(1) blur(1px);
    opacity: 0.5;
  }

  .badge.unlocked:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 0 32px rgba(59, 130, 246, 0.8);
  }

  /* Challenge Progress Bar */
  .challenge-progress {
    height: 8px;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 10px;
    overflow: hidden;
    position: relative;
  }

  .challenge-fill {
    height: 100%;
    background: linear-gradient(90deg, #3B82F6, #06B6D4);
    border-radius: 10px;
    transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 16px rgba(59, 130, 246, 0.6);
  }

  /* Bounty Shimmer */
  @keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
  }

  .bounty-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.3), transparent);
    background-size: 1000px 100%;
    animation: shimmer 3s infinite;
  }

  /* Kill Feed Slide-in */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(100px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .kill-feed-item {
    animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Slot Machine Count-up */
  @keyframes countUp {
    0% { transform: translateY(100%); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }

  .count-up {
    animation: countUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
</style>

<script>
// Gamification data (stored in localStorage)
const GamificationData = {
  currentRanking: 'daily',
  
  badges: [
    { id: 1, name: 'First Enrollment', icon: 'ðŸŽ¯', unlocked: true },
    { id: 2, name: '10 Calls/Day', icon: 'ðŸ“ž', unlocked: true },
    { id: 3, name: '$100K Settled', icon: 'ðŸ’°', unlocked: true },
    { id: 4, name: 'Perfect Week', icon: 'â­', unlocked: false },
    { id: 5, name: '5-Star Review', icon: 'â­', unlocked: true },
    { id: 6, name: 'Speed Demon', icon: 'âš¡', unlocked: false },
    { id: 7, name: 'Team Player', icon: 'ðŸ¤', unlocked: true },
    { id: 8, name: 'Closer', icon: 'ðŸ”’', unlocked: true },
    { id: 9, name: 'Top Performer', icon: 'ðŸ†', unlocked: false },
    { id: 10, name: 'Marathon', icon: 'ðŸƒ', unlocked: false },
    { id: 11, name: 'High Roller', icon: 'ðŸŽ°', unlocked: false },
    { id: 12, name: 'Negotiator', icon: 'ðŸ¤', unlocked: true },
    { id: 13, name: 'Rising Star', icon: 'ðŸŒŸ', unlocked: false },
    { id: 14, name: 'Consistency', icon: 'ðŸ“Š', unlocked: true },
    { id: 15, name: 'Client Favorite', icon: 'â¤ï¸', unlocked: true },
    { id: 16, name: 'Early Bird', icon: 'ðŸŒ…', unlocked: false },
    { id: 17, name: 'Night Owl', icon: 'ðŸ¦‰', unlocked: false },
    { id: 18, name: 'Rainmaker', icon: 'ðŸ’¸', unlocked: false },
    { id: 19, name: 'Mentor', icon: 'ðŸ‘¨â€ðŸ«', unlocked: false },
    { id: 20, name: 'Legend', icon: 'ðŸ‘‘', unlocked: false }
  ],

  challenges: [
    { id: 1, type: 'individual', title: '50 Calls Today', description: 'Make 50 calls by end of day', progress: 42, target: 50, reward: 500, deadline: '6h 23m' },
    { id: 2, type: 'team', title: 'Team $250K Week', description: 'Team revenue goal this week', progress: 187000, target: 250000, reward: 2000, deadline: '2d 14h' },
    { id: 3, type: 'battle', title: 'vs Maria G.', description: '1v1 enrollment battle', progress: 8, target: 10, reward: 1000, deadline: '23h 45m', opponent: 'Maria G. (6/10)' }
  ],

  bounties: [
    { id: 1, title: 'Settle $100K Case', description: 'Close the Johnson case', reward: 5000, difficulty: 'Hard' },
    { id: 2, title: 'Convert Cold Lead', description: '3-month old lead from June', reward: 3000, difficulty: 'Medium' },
    { id: 3, title: 'Perfect Day', description: '10 calls, 3 enrollments, 0 missed', reward: 2500, difficulty: 'Hard' },
    { id: 4, title: 'Weekend Warrior', description: 'Work Saturday & close 2 deals', reward: 4000, difficulty: 'Medium' }
  ],

  killFeed: [
    { agent: 'Sarah J.', action: 'enrolled $45,000 case', time: 'Just now', icon: 'ðŸŽ¯' },
    { agent: 'Maria G.', action: 'made 50th call today', time: '2m ago', icon: 'ðŸ“ž' },
    { agent: 'Agent 3', action: 'settled $28K for client', time: '5m ago', icon: 'âœ…' },
    { agent: 'John S.', action: 'earned Perfect Week badge', time: '8m ago', icon: 'â­' },
    { agent: 'Agent 5', action: 'converted 3 leads in 1 hour', time: '12m ago', icon: 'ðŸ”¥' },
    { agent: 'Agent 8', action: 'hit $100K monthly revenue', time: '18m ago', icon: 'ðŸ’°' },
    { agent: 'Maria G.', action: 'won 1v1 battle vs John', time: '22m ago', icon: 'âš”ï¸' },
    { agent: 'Agent 4', action: 'completed $200K bounty', time: '28m ago', icon: 'ðŸ’Ž' }
  ],

  rewards: [
    { id: 1, name: '$50 Amazon', cost: 5000, icon: 'ðŸŽ' },
    { id: 2, name: '1 Day PTO', cost: 8000, icon: 'ðŸ–ï¸' },
    { id: 3, name: 'Lunch with CEO', cost: 10000, icon: 'ðŸ½ï¸' },
    { id: 4, name: 'Parking Spot', cost: 6000, icon: 'ðŸš—' },
    { id: 5, name: '$100 Visa Card', cost: 9500, icon: 'ðŸ’³' },
    { id: 6, name: 'Home Office Setup', cost: 15000, icon: 'ðŸ–¥ï¸' }
  ],

  rankings: {
    daily: [
      { name: 'John Smith', avatar: 'https://ui-avatars.com/api/?name=John+Smith&background=FFD700&color=000', enrollments: 15, revenue: 48500, calls: 47, points: 12850 },
      { name: 'Maria Garcia', avatar: 'https://ui-avatars.com/api/?name=Maria+Garcia&background=C0C0C0&color=000', enrollments: 12, revenue: 39000, calls: 52, points: 8420 },
      { name: 'Agent 3', avatar: 'https://ui-avatars.com/api/?name=Agent+3&background=CD7F32&color=fff', enrollments: 10, revenue: 32000, calls: 42, points: 6720 },
      { name: 'Agent 4', avatar: 'https://ui-avatars.com/api/?name=Agent+4&background=3B82F6&color=fff', enrollments: 8, revenue: 28000, calls: 38, points: 5200 },
      { name: 'Agent 5', avatar: 'https://ui-avatars.com/api/?name=Agent+5&background=06B6D4&color=fff', enrollments: 7, revenue: 24500, calls: 35, points: 4850 },
      { name: 'Agent 6', avatar: 'https://ui-avatars.com/api/?name=Agent+6&background=10B981&color=fff', enrollments: 6, revenue: 21000, calls: 32, points: 4200 },
      { name: 'Agent 7', avatar: 'https://ui-avatars.com/api/?name=Agent+7&background=F59E0B&color=000', enrollments: 5, revenue: 18500, calls: 29, points: 3650 },
      { name: 'Agent 8', avatar: 'https://ui-avatars.com/api/?name=Agent+8&background=8B5CF6&color=fff', enrollments: 4, revenue: 15000, calls: 26, points: 2980 }
    ]
  }
};

function initGamification() {
  // Load points with count-up animation
  animatePoints(8420);
  
  // Load leaderboard
  loadLeaderboard();
  
  // Load badges
  loadBadges();
  
  // Load challenges
  loadChallenges();
  
  // Load bounties
  loadBounties();
  
  // Load kill feed
  loadKillFeed();
  
  // Load reward store
  loadRewardStore();
  
  // Reinitialize icons
  lucide.createIcons();
  
  // Auto-update kill feed every 10s
  setInterval(() => {
    addKillFeedItem();
  }, 10000);
}

function animatePoints(target) {
  const element = document.getElementById('total-points');
  let current = 0;
  const increment = target / 50;
  const duration = 2000;
  const stepTime = duration / 50;

  const timer = setInterval(() => {
    current += increment;
    if (current >= target) {
      element.textContent = target.toLocaleString();
      clearInterval(timer);
    } else {
      element.textContent = Math.floor(current).toLocaleString();
    }
  }, stepTime);
}

function switchRanking(period) {
  GamificationData.currentRanking = period;
  
  // Update active tab
  document.querySelectorAll('.ranking-tab').forEach(tab => {
    tab.classList.remove('active');
  });
  document.querySelector(`.ranking-tab[data-tab="${period}"]`).classList.add('active');
  
  // Reload leaderboard (for now use same data)
  loadLeaderboard();
}

function loadLeaderboard() {
  const data = GamificationData.rankings[GamificationData.currentRanking];
  
  const html = data.map((agent, i) => {
    const rank = i + 1;
    const rankColor = rank === 1 ? 'text-yellow-400' : rank === 2 ? 'text-gray-400' : rank === 3 ? 'text-orange-400' : 'text-gray-500';
    
    return `
      <tr class="hover:bg-blue-500/5 transition-colors">
        <td class="py-3 text-center">
          <span class="text-xl font-bold ${rankColor} font-orbitron">${rank}</span>
        </td>
        <td class="py-3">
          <div class="flex items-center gap-3">
            <img src="${agent.avatar}" class="w-10 h-10 rounded-full" />
            <span class="text-white font-semibold">${agent.name}</span>
          </div>
        </td>
        <td class="py-3 text-right text-white font-orbitron">${agent.enrollments}</td>
        <td class="py-3 text-right text-white font-orbitron">${DBHelpers.formatCurrency(agent.revenue)}</td>
        <td class="py-3 text-right text-white font-orbitron">${agent.calls}</td>
        <td class="py-3 text-right">
          <span class="text-cyan-400 font-orbitron font-bold">${agent.points.toLocaleString()}</span>
        </td>
      </tr>
    `;
  }).join('');

  document.getElementById('leaderboard-table').innerHTML = html;
}

function loadBadges() {
  const html = GamificationData.badges.map(badge => `
    <div class="flex flex-col items-center gap-2">
      <div class="badge ${badge.unlocked ? 'unlocked' : 'locked'}" title="${badge.name}">
        <span class="text-3xl">${badge.icon}</span>
      </div>
      <p class="text-xs text-gray-400 text-center">${badge.name}</p>
    </div>
  `).join('');

  document.getElementById('badges-grid').innerHTML = html;
}

function loadChallenges() {
  const typeColors = {
    individual: 'blue',
    team: 'green',
    battle: 'red'
  };

  const html = GamificationData.challenges.map(challenge => {
    const color = typeColors[challenge.type];
    const progress = (challenge.progress / challenge.target * 100);
    
    return `
      <div class="p-4 rounded-xl bg-gradient-to-br from-${color}-500/10 to-${color}-500/5 border border-${color}-500/20">
        <div class="flex items-center justify-between mb-3">
          <span class="text-xs uppercase font-semibold text-${color}-400">${challenge.type}</span>
          <span class="text-xs text-gray-500">${challenge.deadline}</span>
        </div>
        <h3 class="text-white font-bold mb-1">${challenge.title}</h3>
        <p class="text-gray-400 text-sm mb-3">${challenge.description}</p>
        ${challenge.opponent ? `<p class="text-xs text-gray-500 mb-3">${challenge.opponent}</p>` : ''}
        <div class="challenge-progress mb-2">
          <div class="challenge-fill" style="width: ${progress}%"></div>
        </div>
        <div class="flex items-center justify-between text-sm">
          <span class="text-gray-400">${challenge.progress.toLocaleString()} / ${challenge.target.toLocaleString()}</span>
          <span class="text-yellow-400 font-bold">${challenge.reward} pts</span>
        </div>
      </div>
    `;
  }).join('');

  document.getElementById('challenges-list').innerHTML = html;
  lucide.createIcons();
}

function loadBounties() {
  const difficultyColors = {
    Easy: 'green',
    Medium: 'yellow',
    Hard: 'red'
  };

  const html = GamificationData.bounties.map(bounty => {
    const color = difficultyColors[bounty.difficulty];
    
    return `
      <div class="p-4 rounded-xl bg-gradient-to-br from-orange-500/10 to-yellow-500/10 border border-orange-500/20 hover:border-orange-500/40 transition-all cursor-pointer">
        <div class="flex items-center justify-between mb-3">
          <span class="text-xs uppercase font-semibold text-${color}-400">${bounty.difficulty}</span>
          <span class="text-yellow-400 font-bold bounty-shimmer px-2 py-1 rounded">${bounty.reward} pts</span>
        </div>
        <h3 class="text-white font-bold mb-1">${bounty.title}</h3>
        <p class="text-gray-400 text-sm">${bounty.description}</p>
      </div>
    `;
  }).join('');

  document.getElementById('bounty-list').innerHTML = html;
}

function loadKillFeed() {
  const html = GamificationData.killFeed.map((item, i) => `
    <div class="kill-feed-item flex items-center gap-3 p-3 rounded-lg bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/20" style="animation-delay: ${i * 0.1}s">
      <div class="text-2xl">${item.icon}</div>
      <div class="flex-1">
        <p class="text-white text-sm">
          <span class="font-bold text-blue-400">${item.agent}</span> ${item.action}
        </p>
        <p class="text-gray-500 text-xs">${item.time}</p>
      </div>
    </div>
  `).join('');

  document.getElementById('kill-feed').innerHTML = html;
}

function addKillFeedItem() {
  const agents = ['Sarah J.', 'Maria G.', 'John S.', 'Agent 3', 'Agent 5'];
  const actions = [
    'enrolled $35K case',
    'settled $22K deal',
    'made 40th call',
    'earned Speed Demon badge',
    'converted 2 leads',
    'completed bounty'
  ];
  const icons = ['ðŸŽ¯', 'âœ…', 'ðŸ“ž', 'â­', 'ðŸ”¥', 'ðŸ’Ž'];

  const newItem = {
    agent: agents[Math.floor(Math.random() * agents.length)],
    action: actions[Math.floor(Math.random() * actions.length)],
    time: 'Just now',
    icon: icons[Math.floor(Math.random() * icons.length)]
  };

  GamificationData.killFeed.unshift(newItem);
  if (GamificationData.killFeed.length > 10) GamificationData.killFeed.pop();

  loadKillFeed();
}

function loadRewardStore() {
  const html = GamificationData.rewards.map(reward => `
    <div class="p-4 rounded-xl bg-gradient-to-br from-pink-500/10 to-rose-500/10 border border-pink-500/20 text-center hover:border-pink-500/40 transition-all">
      <div class="text-4xl mb-2">${reward.icon}</div>
      <h3 class="text-white font-semibold text-sm mb-2">${reward.name}</h3>
      <p class="text-yellow-400 font-bold mb-3">${reward.cost.toLocaleString()} pts</p>
      <button onclick="redeemReward(${reward.id})" class="btn btn-primary w-full text-sm py-2">
        Redeem
      </button>
    </div>
  `).join('');

  document.getElementById('reward-store').innerHTML = html;
}

function redeemReward(rewardId) {
  const reward = GamificationData.rewards.find(r => r.id === rewardId);
  Toast.success(`Redeemed: ${reward.name} for ${reward.cost} points!`);
  
  // Save to localStorage (mock)
  localStorage.setItem('gamification_data', JSON.stringify(GamificationData));
}

// Initialize on load
if (typeof initGamification === 'function') {
  initGamification();
}
</script>
