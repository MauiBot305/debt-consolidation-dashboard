<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Client Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-950">
<div class="client-portal-page p-6 max-w-7xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-1">ðŸ‘¤ Client Portal</h1>
    <p class="text-gray-400">View client-facing dashboard and information</p>
  </div>

  <!-- Client Selector -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8" id="clientSelector">
    <!-- Populated by JS -->
  </div>

  <!-- Client Dashboard (shown after selection) -->
  <div id="clientDashboard" style="display: none;">
    <!-- Debt Overview -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6 mb-8">
      <h2 class="text-2xl font-semibold text-white mb-6">Debt Overview</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="bg-gradient-to-br from-red-500/10 to-red-600/10 border border-red-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Total Debt</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="totalDebt">$0</div>
        </div>
        
        <div class="bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Remaining Balance</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="remainingBalance">$0</div>
        </div>
        
        <div class="bg-gradient-to-br from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Amount Saved</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="amountSaved">$0</div>
        </div>
      </div>
      
      <div class="mb-4">
        <div class="flex justify-between text-sm mb-2">
          <span class="text-gray-400">Program Progress</span>
          <span class="text-blue-400 font-mono" style="font-family: 'Orbitron', monospace;" id="progressPercent">0%</span>
        </div>
        <div class="h-4 bg-slate-700 rounded-full overflow-hidden">
          <div id="progressBar" class="h-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="grid grid-cols-2 gap-4">
        <div class="text-sm">
          <span class="text-gray-400">Monthly Payment:</span>
          <span class="text-white font-semibold ml-2" id="monthlyPayment">$0</span>
        </div>
        <div class="text-sm">
          <span class="text-gray-400">Next Payment:</span>
          <span class="text-white font-semibold ml-2" id="nextPayment">--</span>
        </div>
      </div>
    </div>

    <!-- Payment History -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="receipt" class="w-5 h-5 text-emerald-400"></i>
          Payment History
        </h2>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b border-slate-700/50">
              <th class="text-left p-4 text-gray-400 font-medium">Date</th>
              <th class="text-left p-4 text-gray-400 font-medium">Amount</th>
              <th class="text-left p-4 text-gray-400 font-medium">Method</th>
              <th class="text-left p-4 text-gray-400 font-medium">Status</th>
            </tr>
          </thead>
          <tbody id="paymentHistoryBody">
            <!-- Populated by JS -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Documents -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50 flex items-center justify-between">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="file-text" class="w-5 h-5 text-blue-400"></i>
          Documents
        </h2>
        <button onclick="uploadDocument()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm flex items-center gap-2">
          <i data-lucide="upload" class="w-4 h-4"></i>
          Upload
        </button>
      </div>
      <div class="p-6">
        <div id="documentsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <!-- Message Center -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="message-square" class="w-5 h-5 text-purple-400"></i>
          Message Center
        </h2>
      </div>
      <div class="p-6">
        <div id="messagesList" class="space-y-3 mb-4 max-h-64 overflow-y-auto">
          <!-- Populated by JS -->
        </div>
        <div class="flex gap-2">
          <input type="text" id="newMessage" placeholder="Type a message..." class="flex-1 px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500" onkeypress="if(event.key==='Enter') sendMessage()">
          <button onclick="sendMessage()" class="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg">
            <i data-lucide="send" class="w-5 h-5"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Settlement Offers -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="handshake" class="w-5 h-5 text-yellow-400"></i>
          Settlement Offers
        </h2>
      </div>
      <div class="p-6">
        <div id="settlementsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
</script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-950">
<div class="client-portal-page p-6 max-w-7xl mx-auto">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-1">ðŸ‘¤ Client Portal</h1>
    <p class="text-gray-400">View client-facing dashboard and information</p>
  </div>

  <!-- Client Selector -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8" id="clientSelector">
    <!-- Populated by JS -->
  </div>

  <!-- Client Dashboard (shown after selection) -->
  <div id="clientDashboard" style="display: none;">
    <!-- Debt Overview -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 p-6 mb-8">
      <h2 class="text-2xl font-semibold text-white mb-6">Debt Overview</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="bg-gradient-to-br from-red-500/10 to-red-600/10 border border-red-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Total Debt</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="totalDebt">$0</div>
        </div>
        
        <div class="bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Remaining Balance</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="remainingBalance">$0</div>
        </div>
        
        <div class="bg-gradient-to-br from-emerald-500/10 to-emerald-600/10 border border-emerald-500/30 rounded-xl p-6">
          <div class="text-gray-400 text-sm mb-2">Amount Saved</div>
          <div class="text-3xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;" id="amountSaved">$0</div>
        </div>
      </div>
      
      <div class="mb-4">
        <div class="flex justify-between text-sm mb-2">
          <span class="text-gray-400">Program Progress</span>
          <span class="text-blue-400 font-mono" style="font-family: 'Orbitron', monospace;" id="progressPercent">0%</span>
        </div>
        <div class="h-4 bg-slate-700 rounded-full overflow-hidden">
          <div id="progressBar" class="h-full bg-gradient-to-r from-blue-500 to-emerald-500 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="grid grid-cols-2 gap-4">
        <div class="text-sm">
          <span class="text-gray-400">Monthly Payment:</span>
          <span class="text-white font-semibold ml-2" id="monthlyPayment">$0</span>
        </div>
        <div class="text-sm">
          <span class="text-gray-400">Next Payment:</span>
          <span class="text-white font-semibold ml-2" id="nextPayment">--</span>
        </div>
      </div>
    </div>

    <!-- Payment History -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="receipt" class="w-5 h-5 text-emerald-400"></i>
          Payment History
        </h2>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="border-b border-slate-700/50">
              <th class="text-left p-4 text-gray-400 font-medium">Date</th>
              <th class="text-left p-4 text-gray-400 font-medium">Amount</th>
              <th class="text-left p-4 text-gray-400 font-medium">Method</th>
              <th class="text-left p-4 text-gray-400 font-medium">Status</th>
            </tr>
          </thead>
          <tbody id="paymentHistoryBody">
            <!-- Populated by JS -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Documents -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50 flex items-center justify-between">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="file-text" class="w-5 h-5 text-blue-400"></i>
          Documents
        </h2>
        <button onclick="uploadDocument()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm flex items-center gap-2">
          <i data-lucide="upload" class="w-4 h-4"></i>
          Upload
        </button>
      </div>
      <div class="p-6">
        <div id="documentsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>

    <!-- Message Center -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden mb-8">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="message-square" class="w-5 h-5 text-purple-400"></i>
          Message Center
        </h2>
      </div>
      <div class="p-6">
        <div id="messagesList" class="space-y-3 mb-4 max-h-64 overflow-y-auto">
          <!-- Populated by JS -->
        </div>
        <div class="flex gap-2">
          <input type="text" id="newMessage" placeholder="Type a message..." class="flex-1 px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500" onkeypress="if(event.key==='Enter') sendMessage()">
          <button onclick="sendMessage()" class="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-lg">
            <i data-lucide="send" class="w-5 h-5"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Settlement Offers -->
    <div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700/50 overflow-hidden">
      <div class="p-6 border-b border-slate-700/50">
        <h2 class="text-xl font-semibold text-white flex items-center gap-2">
          <i data-lucide="handshake" class="w-5 h-5 text-yellow-400"></i>
          Settlement Offers
        </h2>
      </div>
      <div class="p-6">
        <div id="settlementsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Populated by JS -->
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
'use strict';
// Toast Function
  function showToast(msg, type='info') {
    const toast = document.createElement('div');
    const colors = { success: 'bg-emerald-500', error: 'bg-red-500', info: 'bg-blue-500' };
    toast.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50`;
    toast.textContent = msg;
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }

  // Check DebtDB
  if (!window.DebtDB) {
    showToast('DebtDB not loaded!', 'error');
  }

  // Demo clients
  const demoClients = [
    { id: 'client_001', name: 'John Smith', totalDebt: 45000, remainingBalance: 32000, monthlyPayment: 450, program: 'Debt Settlement', avatar: 'ðŸ‘¨' },
    { id: 'client_002', name: 'Sarah Johnson', totalDebt: 28000, remainingBalance: 18000, monthlyPayment: 320, program: 'Chapter 13', avatar: 'ðŸ‘©' },
    { id: 'client_003', name: 'Mike Davis', totalDebt: 62000, remainingBalance: 51000, monthlyPayment: 580, program: 'Debt Consolidation', avatar: 'ðŸ‘¨â€ðŸ’¼' },
    { id: 'client_004', name: 'Emily Brown', totalDebt: 19000, remainingBalance: 9500, monthlyPayment: 250, program: 'Debt Settlement', avatar: 'ðŸ‘©â€ðŸ’¼' }
  ];

  let selectedClient = null;

  function renderClientSelector() {
    const container = document.getElementById('clientSelector');
    
    container.innerHTML = demoClients.map(client => `
      <div onclick="selectClient('${client.id}')" class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 hover:border-blue-500/50 transition-all cursor-pointer group">
        <div class="flex items-center gap-4 mb-4">
          <div class="text-5xl">${client.avatar}</div>
          <div class="flex-1">
            <div class="text-white font-semibold">${client.name}</div>
            <div class="text-sm text-gray-400">${client.program}</div>
          </div>
        </div>
        <div class="text-xs text-gray-500 group-hover:text-blue-400 transition-colors">View Portal â†’</div>
      </div>
    `).join('');
  }

  function selectClient(clientId) {
    selectedClient = demoClients.find(c => c.id === clientId);
    if (!selectedClient) return;
    
    document.getElementById('clientSelector').style.display = 'none';
    document.getElementById('clientDashboard').style.display = 'block';
    
    renderClientDashboard();
  }

  function renderClientDashboard() {
    if (!selectedClient) return;
    
    // Debt Overview
    const totalDebt = selectedClient.totalDebt;
    const remaining = selectedClient.remainingBalance;
    const saved = totalDebt - remaining;
    const progress = ((saved / totalDebt) * 100).toFixed(1);
    
    document.getElementById('totalDebt').textContent = '$' + totalDebt.toLocaleString();
    document.getElementById('remainingBalance').textContent = '$' + remaining.toLocaleString();
    document.getElementById('amountSaved').textContent = '$' + saved.toLocaleString();
    document.getElementById('progressPercent').textContent = progress + '%';
    document.getElementById('progressBar').style.width = progress + '%';
    document.getElementById('monthlyPayment').textContent = '$' + selectedClient.monthlyPayment;
    
    const nextDate = new Date();
    nextDate.setDate(nextDate.getDate() + 15);
    document.getElementById('nextPayment').textContent = nextDate.toLocaleDateString();
    
    // Payment History
    renderPaymentHistory();
    
    // Documents
    renderDocuments();
    
    // Messages
    renderMessages();
    
    // Settlements
    renderSettlements();
    
    lucide.createIcons();
  }

  function renderPaymentHistory() {
    const payments = [
      { date: '2026-02-01', amount: 450, method: 'Bank Transfer', status: 'Completed' },
      { date: '2026-01-01', amount: 450, method: 'Bank Transfer', status: 'Completed' },
      { date: '2025-12-01', amount: 450, method: 'Bank Transfer', status: 'Completed' },
      { date: '2025-11-01', amount: 450, method: 'Debit Card', status: 'Completed' }
    ];
    
    const tbody = document.getElementById('paymentHistoryBody');
    
    tbody.innerHTML = payments.map(p => `
      <tr class="border-b border-slate-700/30">
        <td class="p-4 text-gray-300">${new Date(p.date).toLocaleDateString()}</td>
        <td class="p-4 text-white font-mono font-bold" style="font-family: 'Orbitron', monospace;">$${p.amount}</td>
        <td class="p-4 text-gray-300">${p.method}</td>
        <td class="p-4">
          <span class="px-3 py-1 bg-emerald-500/20 text-emerald-400 rounded-full text-xs font-semibold">
            ${p.status}
          </span>
        </td>
      </tr>
    `).join('');
  }

  function renderDocuments() {
    const documents = [
      { name: 'Enrollment Agreement.pdf', date: '2026-01-15', size: '245 KB' },
      { name: 'Monthly Statement - Feb.pdf', date: '2026-02-01', size: '128 KB' },
      { name: 'Settlement Letter - Chase.pdf', date: '2026-02-10', size: '89 KB' }
    ];
    
    const grid = document.getElementById('documentsGrid');
    
    grid.innerHTML = documents.map(doc => `
      <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-4 hover:border-blue-500/50 transition-all cursor-pointer">
        <div class="flex items-start gap-3">
          <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0">
            <i data-lucide="file-text" class="w-5 h-5 text-blue-400"></i>
          </div>
          <div class="flex-1 min-w-0">
            <div class="text-white text-sm font-semibold truncate">${doc.name}</div>
            <div class="text-xs text-gray-400 mt-1">${doc.date} â€¢ ${doc.size}</div>
          </div>
          <button class="text-blue-400 hover:text-blue-300">
            <i data-lucide="download" class="w-4 h-4"></i>
          </button>
        </div>
      </div>
    `).join('');
    
    lucide.createIcons();
  }

  function renderMessages() {
    const messages = [
      { from: 'Support Team', text: 'Your next payment is due on March 1st.', time: '2 hours ago', fromClient: false },
      { from: 'You', text: 'When will the settlement with Chase be finalized?', time: '1 day ago', fromClient: true },
      { from: 'Support Team', text: 'We\'re currently negotiating with Chase. Updates in 3-5 business days.', time: '1 day ago', fromClient: false }
    ];
    
    const container = document.getElementById('messagesList');
    
    container.innerHTML = messages.map(msg => `
      <div class="flex ${msg.fromClient ? 'justify-end' : 'justify-start'}">
        <div class="max-w-md ${msg.fromClient ? 'bg-blue-500' : 'bg-slate-700'} rounded-xl p-3">
          <div class="text-xs ${msg.fromClient ? 'text-blue-200' : 'text-gray-400'} mb-1">${msg.from} â€¢ ${msg.time}</div>
          <div class="text-white text-sm">${msg.text}</div>
        </div>
      </div>
    `).join('');
  }

  function sendMessage() {
    const input = document.getElementById('newMessage');
    const text = input.value.trim();
    if (!text) return;
    
    const container = document.getElementById('messagesList');
    const newMsg = document.createElement('div');
    newMsg.className = 'flex justify-end';
    newMsg.innerHTML = `
      <div class="max-w-md bg-blue-500 rounded-xl p-3">
        <div class="text-xs text-blue-200 mb-1">You â€¢ Just now</div>
        <div class="text-white text-sm">${text}</div>
      </div>
    `;
    container.appendChild(newMsg);
    
    input.value = '';
    container.scrollTop = container.scrollHeight;
    
    showToast('Message sent!', 'success');
  }

  function renderSettlements() {
    const settlements = [
      { creditor: 'Chase Credit Card', originalBalance: 12000, offerAmount: 6000, savings: 6000, status: 'Pending' },
      { creditor: 'Capital One', originalBalance: 8500, offerAmount: 4250, savings: 4250, status: 'Accepted' }
    ];
    
    const grid = document.getElementById('settlementsGrid');
    
    grid.innerHTML = settlements.map(s => {
      const savingsPercent = ((s.savings / s.originalBalance) * 100).toFixed(0);
      const isPending = s.status === 'Pending';
      
      return `
        <div class="bg-slate-800/50 border ${isPending ? 'border-yellow-500/30' : 'border-emerald-500/30'} rounded-xl p-6">
          <div class="flex items-start justify-between mb-4">
            <div>
              <div class="text-white font-semibold">${s.creditor}</div>
              <div class="text-sm text-gray-400">Original: $${s.originalBalance.toLocaleString()}</div>
            </div>
            <span class="px-3 py-1 ${isPending ? 'bg-yellow-500/20 text-yellow-400' : 'bg-emerald-500/20 text-emerald-400'} rounded-full text-xs font-semibold">
              ${s.status}
            </span>
          </div>
          
          <div class="mb-4">
            <div class="text-2xl font-bold text-white font-mono" style="font-family: 'Orbitron', monospace;">$${s.offerAmount.toLocaleString()}</div>
            <div class="text-sm text-emerald-400">Save ${savingsPercent}% ($${s.savings.toLocaleString()})</div>
          </div>
          
          ${isPending ? `
            <div class="flex gap-2">
              <button onclick="acceptOffer('${s.creditor}')" class="flex-1 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 text-sm">Accept</button>
              <button onclick="rejectOffer('${s.creditor}')" class="flex-1 px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/50 rounded-lg hover:bg-red-500/30 text-sm">Decline</button>
            </div>
          ` : '<div class="text-center text-emerald-400 text-sm">âœ“ Offer Accepted</div>'}
        </div>
      `;
    }).join('');
  }

  function uploadDocument() {
    showToast('Document upload coming soon!', 'info');
  }

  function acceptOffer(creditor) {
    showToast(`Settlement offer from ${creditor} accepted!`, 'success');
    renderSettlements();
  }

  function rejectOffer(creditor) {
    showToast(`Settlement offer from ${creditor} declined.`, 'info');
    renderSettlements();
  }

  // Initialize
  renderClientSelector();
  lucide.createIcons();

// Window exports for onclick handlers
  window.acceptOffer = acceptOffer;
  window.rejectOffer = rejectOffer;
  window.selectClient = selectClient;
  window.sendMessage = sendMessage;
  window.uploadDocument = uploadDocument;
})();
</script>
</body>
</html>
